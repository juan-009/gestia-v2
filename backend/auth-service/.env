# Este archivo contiene la configuración del entorno para el servicio de autenticación.
################################
# Configuración Base del Sistema
################################

# Entorno: desarrollo, staging, producción
APP_ENV=development
# Clave secreta para firmas internas (64+ caracteres)
APP_SECRET_KEY=cba42af05624e70bd43f1857dd7444c4752a668034717b30bc86accc3f148d6e

####################
# Base de Datos (PostgreSQL)
####################
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=auth_user
POSTGRES_PASSWORD=your-db-password-here
POSTGRES_DB=auth_db
DATABASE_POOL_SIZE=20  # Conexiones máximas

################
# Redis (Cache y Tokens)
################
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here
REDIS_DB_TOKENS=0  # Base para tokens revocados
REDIS_DB_CACHE=1   # Base para cache de permisos

##########################
# JWT (RS256 Configuration)
##########################
JWT_PRIVATE_KEY_PATH=/app/keys/jwt_private.pem
JWT_PUBLIC_KEY_PATH=/app/keys/jwt_public.pem
JWT_ALGORITHM=RS256
JWT_ACCESS_EXPIRE_MINUTES=15
JWT_REFRESH_EXPIRE_DAYS=7
JWT_TOKEN_VERSION=1.0.0  # Para revocación masiva
JWKS_ENDPOINT=/auth/.well-known/jwks.json

##########################
# Políticas de Seguridad
##########################
MAX_LOGIN_ATTEMPTS=5    # Intentos fallidos antes de bloqueo
ACCOUNT_LOCK_MINUTES=15 # Tiempo de bloqueo temporal
MIN_PASSWORD_LENGTH=12  # Longitud mínima contraseña
MFA_ENABLED=true        # Habilitar autenticación multifactor
CORS_ALLOWED_ORIGINS="http://localhost:3000,https://your-domain.com"

##########################
# Rate Limiting
##########################
RATE_LIMIT_REQUESTS=1000  # Máximo de requests por ventana
RATE_LIMIT_MINUTES=1      # Ventana de tiempo en minutos

##########################
# Configuración Adicional
##########################
ADMIN_INITIAL_EMAIL=admin@example.com
ADMIN_INITIAL_PASSWORD=ChangeThisSecurePassword123!
ENCRYPTION_KEY=your-32-char-encryption-key-here  # Para datos sensibles

##########################
# Observabilidad
##########################
PROMETHEUS_ENDPOINT=/metrics
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
